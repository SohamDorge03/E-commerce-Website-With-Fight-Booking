(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4792],{71537:function(e,t,n){"use strict";n.d(t,{z:function(){return eg}});var r=n(52322);n(98248),n(61219);var i=n(55671),a=n(62202),o=n(18200),s=n(81674),l=n(94523),d=n(97729),c=n.n(d),u=n(5632),g=n(2784),p=n(43997),h=n(14274),m=n(93202),f=n(2013);let v=e=>{let t=["malformed","encoded","illegal"];return e.includes("URIError")&&e.split(" ").some(e=>t.includes(e))};class _ extends g.Component{componentDidMount(){window.addEventListener("error",this.handleError),window.addEventListener("unhandledrejection",this.handleUnhandledRejection)}componentWillUnmount(){window.removeEventListener("error",this.handleError),window.removeEventListener("unhandledrejection",this.handleUnhandledRejection)}componentDidCatch(e,t){if("dev"===h.v.APPLICATION_ENVIRONMENT)throw e}static getDerivedStateFromError(e){return{hasError:!0,errMessage:e.message,shouldMountChildren:!1}}handleError(e){if("dev"===h.v.APPLICATION_ENVIRONMENT)throw Error("[ErrorBoundary]: ".concat(e.message))}handleUnhandledRejection(e){let t=this.props.unhandledRejectionFilter(e);if(t){var n;let t=(null===(n=e.reason)||void 0===n?void 0:n.message)||"";this.setState({hasError:!0,errMessage:t})}}render(){let e=!0===v(this.state.errMessage)?{opacity:"0.65",starOverlay:!1}:{};return(0,r.jsxs)(r.Fragment,{children:[this.state.hasError&&(0,r.jsx)(f.q,{pos:"absolute",top:0,...e,errMessage:""===this.state.errMessage?void 0:this.state.errMessage,showDisclosure:!0}),this.state.shouldMountChildren&&this.props.children]})}constructor(e){super(e),this.state={hasError:!1,errMessage:"",shouldMountChildren:!0},this.handleError=this.handleError.bind(this),this.handleUnhandledRejection=this.handleUnhandledRejection.bind(this)}}_.defaultProps={unhandledRejectionFilter:e=>{var t;return!!v((null===(t=e.reason)||void 0===t?void 0:t.message)||"")||e.reason instanceof m.YBv&&!1===document.hidden||e.reason instanceof m.R5s}},n(61036),n(62376),n(6991),n(76298),n(4466),n(43839),n(40917);var C=n(11050),y=n(42005);let w=()=>{let e=(0,g.useRef)(!1),t=(0,g.useRef)(new Map);(0,g.useEffect)(()=>{if("production"!==h.v.APPLICATION_ENVIRONMENT)return;let n=()=>{if(e.current)return;let n=t.current.get("total"),r=t.current.get("notTrusted"),i=r/n>.5;i&&n>5&&(e.current=!0,y.c.track(C.xW.NOT_TRUSTED_EVENTS_DETECTED,{totalEvents:n,notTrustedEvents:r}))},r=e=>{e.isTrusted||t.current.set("notTrusted",(t.current.get("notTrusted")||0)+1),t.current.set("total",(t.current.get("total")||0)+1),n()};return document.addEventListener("paste",r,{capture:!0}),document.addEventListener("mousedown",r,{capture:!0}),document.addEventListener("keydown",r,{capture:!0}),()=>{document.removeEventListener("paste",r,{capture:!0}),document.removeEventListener("mousedown",r,{capture:!0}),document.removeEventListener("keydown",r,{capture:!0})}},[])};var E=n(79254),b=n(27354),x=n(42111),I=n(32019),A=n(99092),P=n(36651);let j=(e,t)=>{A.H.init(h.v.HIGHLIGHT_PROJECT_ID,{environment:h.v.APPLICATION_ENVIRONMENT,sessionShortcut:!!t&&"shift+command+0",enableStrictPrivacy:e,enableSegmentIntegration:!0,networkRecording:{enabled:!0,recordHeadersAndBody:!0}}),C.co.loadSdkPromise.then(e=>{e&&e.addSourceMiddleware(A.LZ)})},S=e=>{let{children:t}=e,{user:n,anonymousUser:i,isGammaOrgUser:a,isUserLoading:o}=(0,P.SE)(),{enabled:s,enableStrictPrivacy:l}=(0,x.ye)("highlight");return(0,g.useEffect)(()=>{s&&!o&&n&&j(l,a)},[l,s,a,o,n]),(0,g.useEffect)(()=>{if(!o){if(n){let{id:e,displayName:t,email:r,profileImageUrl:i}=n;A.H.identify(e,{highlightDisplayName:t,email:r,avatar:i})}else if(null==i?void 0:i.id){let{id:e,displayName:t}=i;A.H.identify("",{anonDisplayName:t||"",anonId:e})}}},[n,i,o]),(0,r.jsx)(r.Fragment,{children:t})};var k=n(34881),N=n(87254),T=n(5879),R=n(44754);let U=e=>{let{children:t}=e;return(0,R.b)(),(0,r.jsx)(T.bd,{i18n:N.ag,children:t})};var D=n(18875),O=n(17292),M=n(55478),H=n(76332),L=n(6912),F=n(27902),G=n(21733),B=n(78462),q=n(72354),K=n(1163),Y=n(2953);let W="get-gamma-pro",V=e=>{var t,n;let{children:i}=e,{currentWorkspace:a,isUserLoading:o}=(0,G.SE)(),[s,l]=(0,g.useState)(!1),d=(0,F.z$)(),c=(0,x.ye)("upsellUXEnabled_Pro"),{data:u,refetch:p}=(0,H.FaU)({variables:{workspaceId:null==a?void 0:a.id,includeExpired:!0},skip:!(null==a?void 0:a.id)}),h=null==u?void 0:u.subscription;(0,L.ET)({subscription:h,workspace:a,autoLaunch:!0});let{data:m}=(0,H.kNl)({variables:{workspaceId:null==a?void 0:a.id},skip:!a}),f=null==m?void 0:null===(t=m.products)||void 0===t?void 0:t.find(e=>"pro"===e.key),v=null==f?void 0:null===(n=f.prices)||void 0===n?void 0:n.find(e=>e.frequencyUnit===H.C_B.Year),_=(0,K.K9)(a),{isOpen:C,onOpen:y,onClose:w}=(0,M.q)({id:"upsell-modal"}),E=(0,g.useRef)(null),b=(0,g.useCallback)(e=>{let{onOpenCallback:t,onCloseCallback:n,insufficientCreditsWarning:r,segmentEvent:i}=e;c&&(l(!!r),null==t||t(),y(),null==d||d.track(i),E.current=n||null)},[d,y,c]),I=(0,g.useCallback)(()=>{var e;null==E||null===(e=E.current)||void 0===e||e.call(E),w(),E.current=null,l(!1)},[w]),[A,P]=(0,g.useState)({openUpsellModal:b,product:_,subscription:h,proYearlyProductPrice:v});return(0,g.useEffect)(()=>{let e="true"===(0,B.SJ)()[W];e&&!o&&a&&(y(),(0,k.lO)({query:{...(0,B.SJ)(),[W]:void 0},emitChange:!1}))},[y,a,o]),(0,g.useEffect)(()=>{P({openUpsellModal:b,refetchSubscription:p,product:_,subscription:h,proYearlyProductPrice:v})},[b,_,h,v,p]),(0,r.jsxs)(Y.P.Provider,{value:A,children:[i,(0,r.jsx)(q.b,{insufficientCreditsWarning:s,isUpsellModalOpen:C,closeUpsellModal:I}),(0,r.jsx)(L.S1,{})]})};var X=n(99268),z=n(25944),J=n(19902);let Q="no_org_id",Z=e=>{let{children:t}=e;(0,z.iZ)();let{user:n,anonymousUser:i,currentWorkspace:a,isUserLoading:o}=(0,P.SE)();return(0,g.useEffect)(()=>{let e=(0,J.K)();(0,X.$n)(e.get()),e.fetch().then(X.$n).catch(()=>{})},[]),(0,g.useEffect)(()=>{let e;if(!o){if(n){let{id:t,email:r}=n,i=!!r&&r.endsWith("@gamma.app"),o=(null==a?void 0:a.id)||Q;e={userId:t,isGammaUser:i,userOrgId:o,anonymousUser:!1,gammaUserFirstName:i?n.firstName:""}}else e={userId:"anonymous_user",isGammaUser:!1,userOrgId:Q,anonymousUser:!0,gammaUserFirstName:""};(0,X.$n)(e)}},[o,n,i,a]),(0,r.jsx)(r.Fragment,{children:t})};var $=n(54839),ee=n(91994),et=n(89311),en=n(95426),er=n(1198),ei=n(90221),ea=n(60742),eo=n(13265),es=n(90383);s.vc.autoAddCss=!1;let el=(0,ee.bh)(),ed=(0,m.RqP)(),ec=(0,m.PGq)(),eu=(0,a.B1)(l.qZ,{styles:{global:{".ProseMirror":{outline:"0 none"}}}});((e,t)=>{let n=(0,$.I)({theme:t});e.globalToast=n})(window,eu),(0,ea.Lq)(),O.F7.initialize(),(0,k.lt)(),C.co.init(),(0,D.S1)(),(0,b.u7)(),(0,en.a)("appMainBundleLoaded"),console.log("\uD83D\uDE80 GammaApp main wrapper imported"),x.VH.get("debugLogging")||(window.console.debug=()=>{});let eg=e=>function(t){return(0,r.jsx)(ep,{children:(0,r.jsx)(e,{...t})})},ep=e=>{let{children:t}=e;console.log("\uD83D\uDE80 GammaApp main wrapper rendered");let n=(0,u.useRouter)();(0,et.l)(),(0,eo.k)(),w(),(0,g.useEffect)(()=>{let e=(e,t)=>{let{shallow:n}=t;console.debug("[GammaApp - handleRouteChange] App is changing to ".concat(e," ").concat(n?"with":"without"," shallow routing"))};return n.events.on("routeChangeStart",e),()=>{n.events.off("routeChangeStart",e)}},[n]);let a=(0,er.aY)();return(0,r.jsx)(p.zt,{store:el,children:(0,r.jsx)(U,{children:(0,r.jsx)(o.x,{theme:eu,resetCSS:!0,children:(0,r.jsx)(_,{children:(0,r.jsx)(i.e,{client:ed,children:(0,r.jsxs)(m.mdV,{client:ec,children:[(0,r.jsx)(em,{}),(0,r.jsx)(E.H6,{}),(0,r.jsx)(D.GQ,{}),(0,r.jsxs)(P.fS,{children:[(0,r.jsx)(F.qA,{children:(0,r.jsx)(x.dF,{children:(0,r.jsx)(V,{children:(0,r.jsx)(m.Imj,{children:(0,r.jsx)(Z,{children:(0,r.jsx)(S,{children:(0,r.jsx)(er.dv,{value:a,children:(0,r.jsx)(I.u,{children:t})})})})})})})}),(0,r.jsx)(x.MG,{})]})]})})})})})})},eh="A new medium for presenting ideas, powered by AI. Beautiful, engaging content with none of the formatting and design work.",em=()=>{let e=h.v.APPLICATION_ENVIRONMENT;return(0,r.jsxs)(c(),{children:[(0,r.jsx)("title",{children:"Gamma"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, viewport-fit=cover"}),(0,r.jsx)("link",{rel:"manifest",href:"/manifest.json"}),(0,r.jsx)("link",{rel:"shortcut icon",href:"production"===e?"/favicons/favicon-transparent-96x96.png":"staging"===e?"/favicons/favicon_staging.jpg":"/favicons/favicon_local.jpg"}),(0,r.jsx)("meta",{content:eh,name:"description"},"description"),(0,r.jsx)("meta",{content:"Gamma",property:"og:title"},"og:title"),(0,r.jsx)("meta",{content:eh,property:"og:description"},"og:description"),(0,r.jsx)("meta",{content:h.v.OG_IMAGE_URL,property:"og:image"},"og:image"),(0,r.jsx)("meta",{content:"Gamma",property:"twitter:title"},"twitter:title"),(0,r.jsx)("meta",{content:eh,property:"twitter:description"},"twitter:description"),(0,r.jsx)("meta",{content:h.v.OG_IMAGE_URL,property:"twitter:image"},"twitter:image"),(0,r.jsx)("meta",{property:"og:type",content:"website"},"og:type"),(0,r.jsx)("meta",{content:"summary_large_image",name:"twitter:card"},"twitter:card"),(0,r.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900",rel:"stylesheet"}),(0,r.jsx)("link",{rel:"stylesheet",href:"https://use.typekit.net/tiw2cwq.css"}),!(0,ei.l6)()&&!(0,es.wg)()&&(0,r.jsx)("script",{async:!0,src:"https://cdn.optimizely.com/js/20579410255.js"}),(0,r.jsx)("script",{src:"//cdn.iframe.ly/embed.js",async:!0,charSet:"utf-8"})]})}},2013:function(e,t,n){"use strict";n.d(t,{q:function(){return E}});var r=n(52322),i=n(38035),a=n(77533),o=n(49259),s=n(87436),l=n(95897),d=n(28535),c=n(89511),u=n(11121),g=n(44438),p=n(42822),h=n(62614),m=n(75009),f=n(94523),v=n(5879),_=n(3543),C=n(92981);let y=(0,r.jsx)(v.cC,{id:"HiX9QN"}),w={bgImage:"radial-gradient(1px 1px at 20px 30px, #eee, rgba(0,0,0,0)),\n    radial-gradient(1px 1px at 40px 70px, #fff, rgba(0,0,0,0)),\n    radial-gradient(1px 1px at 50px 160px, #ddd, rgba(0,0,0,0)),\n    radial-gradient(1px 1px at 90px 40px, #fff, rgba(0,0,0,0)),\n    radial-gradient(1px 1px at 130px 80px, #fff, rgba(0,0,0,0)),\n    radial-gradient(1px 1px at 160px 120px, #ddd, rgba(0,0,0,0))",bgRepeat:"repeat",bgSize:"200px 200px",transform:"translate(-50%,-50%)",borderRadius:{base:0,lg:"100px"},pos:"relative",maxW:"8xl",maxH:"5xl",minH:{base:0,lg:"5xl"}},E=e=>{let{errMessage:t=y,showDisclosure:n=!1,opacity:E=1,starOverlay:b=!0,backgroundColor:x=f.qZ.colors.trueblue[900],...I}=e,A=b?w:{};return(0,r.jsx)(i.k,{"data-error-component":!0,w:"100vw",h:"100vh",overflow:"hidden",zIndex:99999,backgroundColor:(0,_.tT)(x,E),...I,children:(0,r.jsx)(i.k,{...A,justifyContent:"center",alignItems:"center",flex:1,p:[4,16],left:"50%",top:"50%",children:(0,r.jsxs)(C.qX,{lede:"",title:(0,r.jsx)(v.cC,{id:"HbR60U"}),stackProps:{shadow:"lg-dark",position:"relative"},children:[(0,r.jsx)(a.x,{children:(0,r.jsx)(v.cC,{id:"1gm+lP"})}),n&&(0,r.jsx)(o.U,{allowToggle:!0,pt:4,children:(0,r.jsxs)(s.Q,{children:[(0,r.jsxs)(l.K,{px:0,_hover:{bgColor:"none"},borderStyle:"none",children:[(0,r.jsx)(d.xu,{flex:"1",textAlign:"left",children:(0,r.jsx)(v.cC,{id:"qug3k/"})}),(0,r.jsx)(c.X,{})]}),(0,r.jsx)(u.H,{pb:4,children:(0,r.jsx)(g.E,{colorScheme:"red",children:t})})]})}),(0,r.jsx)(p.M,{children:(0,r.jsx)(h.z,{variant:"solid",size:"lg",m:6,onClick:()=>{window.location.reload()},children:(0,r.jsx)(v.cC,{id:"C6f2hU"})})}),(0,r.jsx)(m.E,{pos:"absolute",w:36,bottom:"calc(-100% + 120px)",right:-12,src:"/_next/static/media/Sal-Asteroid-Parachute.ad317576.png",pointerEvents:"none",opacity:{base:0,md:1}})]})})})}},79254:function(e,t,n){"use strict";n.d(t,{$C:function(){return g},H6:function(){return u},Uj:function(){return p}});var r=n(52322),i=n(5632),a=n(45847),o=n.n(a),s=n(14274),l=n(93441),d=n(34385);let c=["/signin","/signup","/invitations/workspaces/[workspaceId]"],u=()=>{let e=(0,i.useRouter)().pathname;return!(0,l.gF)()||c.includes(e)?null:(0,r.jsx)("style",{children:".grecaptcha-badge { visibility: hidden; }"})},g=()=>(0,r.jsx)(o(),{src:"https://www.google.com/recaptcha/enterprise.js?render=".concat(s.v.RECAPTCHA_SCORING_KEY),async:!0,defer:!0}),p=async e=>(await (0,d.X)(50,100)(()=>!!window.grecaptcha).catch(()=>{throw Error("Timed out waiting for grecaptcha")}),new Promise((t,n)=>{grecaptcha.enterprise.ready(async()=>{try{let n=await grecaptcha.enterprise.execute(s.v.RECAPTCHA_SCORING_KEY,{action:e});t(n)}catch(e){console.log(e),n(e)}})}))},6912:function(e,t,n){"use strict";n.d(t,{S1:function(){return y},B_:function(){return b},ET:function(){return w}});var r=n(2784),i=n(14274),a=n(88232),o=n(42111),s=n(49152),l=n(44663),d=n(1163),c=n(11050),u=n(90221),g=n(23284),p=n(90383),h=n(87254),m=n(82108),f=n.n(m),v=n(94199);let _=(e,t)=>{let n=f()(t);return{[e]:{next:h.ag._({id:"hXzOVo"}),back:h.ag._({id:"iH8pgl"}),nevermind:h.ag._({id:"CKyk7Q"}),goToAccount:h.ag._({id:"C9yTHG",values:{GAMMA_PROPER_NOUN:v.N6}}),getHelp:h.ag._({id:"pWsyuL"}),declineOffer:h.ag._({id:"aIFikE"}),confirmAndCancel:h.ag._({id:"G9nPRC"}),pauseSubscription:h.ag._({id:"2RgEmU"}),cancelSubscription:h.ag._({id:"dEgA5A"}),discountSubscription:h.ag._({id:"qG4Wa/"}),claimOffer:h.ag._({id:"/Gl/RK"}),discountOff:h.ag._({id:"Bdtwnw"}),discountFor:h.ag._({id:"sQv06Y"}),discountForever:h.ag._({id:"FsOOWf"}),discountOneTime:h.ag._({id:"HpXCa4"}),day:h.ag._({id:"5YWExy"}),month:h.ag._({id:"obrMay"}),year:h.ag._({id:"/Tw548"}),error:h.ag._({id:"wTrpxV"}),genericErrorDescription:h.ag._({id:"PUjJ3A"}),cancelNow:h.ag._({id:"EiakwV"}),applyingDiscount:h.ag._({id:"8kSYjw"}),applyingCancel:h.ag._({id:"VpuvNv"}),applyingResume:h.ag._({id:"eIoGiX"}),applyingPause:h.ag._({id:"UD7gOq"}),discountApplied:h.ag._({id:"jdYyiz"}),discountAppliedMessage:h.ag._({id:"DhHX6G"}),pauseApplied:h.ag._({id:"eeITvj"}),pauseAppliedMessage:h.ag._({id:"nm0VaE"}),pauseAppliedResumeMessage:h.ag._({id:"qOe0SS"}),pauseScheduledMessage:h.ag._({id:"mqRc6d"}),until:h.ag._({id:"C51N+0"}),cancelApplied:h.ag._({id:"Wcg6zu"}),cancelAppliedMessage:h.ag._({id:"8vN97Y"}),cancelAppliedDateMessage:h.ag._({id:"BS/SGu"}),howLongToPausePrompt:h.ag._({id:"HLyJ9n"}),whatCouldWeHaveDone:h.ag._({id:"fcbm8H"}),weReadEveryAnswer:h.ag._({id:"nkuKRd"}),applyingCustomerAction:h.ag._({id:"PXwF+s"}),loading:h.ag._({id:"Z3FXyt"}),pauseWallCardPunch:h.ag._({id:"iL2TQ6"}),pauseWallCta:h.ag._({id:"TvXj47"}),pauseWallCardHeading:h.ag._({id:"kHm8Fg"}),scheduledToReactivate:h.ag._({id:"aH7vi8"}),resumeApplied:h.ag._({id:"diOgYK"}),resumeAppliedMessage:h.ag._({id:"YqFvUY"}),resumeNextChargeMessage:h.ag._({id:"VDqPUf"}),resumeNextChargeMessageWithoutAmount:h.ag._({id:"RrvVAn"}),resumeAccountDataInfo:h.ag._({id:"dJCJXA"}),subscriptionPauseNotice:h.ag._({id:"fpxliT"}),failedPaymentNotice:h.ag._({id:"Vxg5vO"}),chargedMultipleTimeNotice:h.ag._({id:"lAlv46"}),failedPaymentCardPunch:h.ag._({id:"KEZrHg",values:{GAMMA_PROPER_NOUN:v.N6,productName:n}}),resumeHey:h.ag._({id:"hdOctW"}),invoicePaidTitle:h.ag._({id:"aJGfDL"}),logout:h.ag._({id:"W+3RJN"}),note:h.ag._({id:"ycCSuD"}),discount:h.ag._({id:"HmpVeZ"}),discountNoticeHeadline:h.ag._({id:"5P1dmt"}),discountNoticePrepend:h.ag._({id:"yjadEY"}),discountOverride:h.ag._({id:"JfBDWL"}),discountValidUntil:h.ag._({id:"uXxNua"}),updateBilling:h.ag._({id:"tQilrI"}),extendTrialCTA:h.ag._({id:"m3l7VI"}),extendTrialPunch:h.ag._({id:"s5pINo"}),extendTrialOfferTitle:h.ag._({id:"SyzXYh"}),trialExtended:h.ag._({id:"fezME2"}),trialExtendedMessage:h.ag._({id:"QE4mUs"}),applyingTrialExtension:h.ag._({id:"vI2q9R"}),switchPlanCTA:h.ag._({id:"P2mx2L"}),changePlanHighlights:h.ag._({id:"qbgW+C"}),changePlanOfferPunch:h.ag._({id:"MRkiFP"}),planChanged:h.ag._({id:"ByFtyh"}),planChangedMessage:h.ag._({id:"Pf5z1G"}),applyingPlanChange:h.ag._({id:"9vKKLI"}),surveyStepTag:h.ag._({id:"cSUBI1"}),freeFormStepTag:h.ag._({id:"cSUBI1"}),finalConfirmation:h.ag._({id:"1/oP/N"}),offerDiscountTag:h.ag._({id:"LTgtxG"}),offerChangePlanTag:h.ag._({id:"ENMJv2"}),offerExtendTrialTag:h.ag._({id:"MWKntz"}),offerRedirectTag:h.ag._({id:"cvpAvL"}),offerContactTag:h.ag._({id:"cvpAvL"}),offerPauseTag:h.ag._({id:"+T6DGl"}),completeTag:h.ag._({id:"K5c1e7"}),errorTag:h.ag._({id:"EuvbIW"}),offerAccepted:h.ag._({id:"ZU0opP"})}}},C="\n!function(){  \n    if (!window.churnkey || !window.churnkey.created) {\n      window.churnkey = { created: true };\n      const a = document.createElement('script');\n      a.src = 'https://assets.churnkey.co/js/app.js?appId=".concat(i.v.CHURNKEY_APP_ID,"';\n      a.async = true;\n      const b = document.getElementsByTagName('script')[0];\n      b.parentNode.insertBefore(a, b);\n    }\n  }();\n"),y=()=>{let e=!(0,u.l6)()&&!(0,p.wg)();return(0,g.G)(e,C),null},w=e=>{let{subscription:t,workspace:n,autoLaunch:c=!0}=e,u=(0,o.ye)("churnkeyFailedPaymentWallEnabled"),g=(0,s.l)(),p=(0,d.K9)(n),h=(0,l.G)(),m=(0,r.useCallback)(async()=>{if(t&&p&&u)return(0,a.d6)("churnkey").then(e=>{var n,r;if(!e||!t.billingSubscriptionId||!(null===(n=t.createdByUser)||void 0===n?void 0:n.billingCustomerId)){console.error("[Churnkey] launchFailedPayment Missing hmac or subscription data",{hmac:e,subscription:t});return}console.debug("[Churnkey] launchFailedPayment - launching churnkey with:",{hmac:e,appId:i.v.CHURNKEY_APP_ID,subscriptionId:t.billingSubscriptionId,customerId:null===(r=t.createdByUser)||void 0===r?void 0:r.billingCustomerId}),E({authHash:e,subscription:t,localeKey:g,productKey:p,launchIntercomUI:h})})},[t,p,u,g,h]);return(0,r.useEffect)(()=>{c&&m()},[m,c]),{launchFailedPaymentFlow:m,failedPaymentFlowEnabled:u}},E=async e=>{var t,n;let{authHash:r,subscription:a,localeKey:o,productKey:s,launchIntercomUI:l}=e;null===(n=window.churnkey)||void 0===n||n.check("failed-payment",{subscriptionId:a.billingSubscriptionId,customerId:null===(t=a.createdByUser)||void 0===t?void 0:t.billingCustomerId,authHash:r,customerAttributes:{language:o},i18n:{lang:o,messages:_(o,s)},appId:i.v.CHURNKEY_APP_ID,mode:i.v.CHURNKEY_MODE,provider:"stripe",softWall:!0,forceCheck:!1,gracePeriodDays:3,ignoreInvoicesWithoutAttempt:!1,handleSupportRequest(){var e;l(),c.co.track(c.AA.CHURNKEY_HANDLE_SUPPORT_CLICK,{source:"failed-payment-wall",subscriptionId:a.billingSubscriptionId,customerId:null===(e=a.createdByUser)||void 0===e?void 0:e.billingCustomerId})},async handleCancel(e){var t,n;return c.co.track(c.AA.CANCEL_SUBSCRIPTION_CLICK,{source:"failed-payment-wall",subscriptionId:a.billingSubscriptionId,customerId:null===(t=a.createdByUser)||void 0===t?void 0:t.billingCustomerId}),console.debug("[launchChurnkeyFailedPayment.handleCancel]",{subscriptionId:a.billingSubscriptionId,customerId:null===(n=a.createdByUser)||void 0===n?void 0:n.billingCustomerId,customer:e}),x({authHash:r,subscription:a,localeKey:o,productKey:s,launchIntercomUI:l,customerAttributes:{viaFailedPayment:!0}}).catch(e=>E({authHash:r,subscription:a,localeKey:o,productKey:s,launchIntercomUI:l}))},onFailedPaymentWallActivated(){var e;c.co.track(c.AA.CHURNKEY_FAILED_PAYMENT_WALL_SHOWN,{subscriptionId:a.billingSubscriptionId,customerId:null===(e=a.createdByUser)||void 0===e?void 0:e.billingCustomerId})},onUpdatePaymentInformation(){var e;c.co.track(c.AA.CHURNKEY_PAYMENT_METHOD_UPDATED,{source:"failed-payment-wall",subscriptionId:a.billingSubscriptionId,customerId:null===(e=a.createdByUser)||void 0===e?void 0:e.billingCustomerId})},onFailedPaymentWallClose(){var e;c.co.track(c.AA.CHURNKEY_FAILED_PAYMENT_WALL_CLOSED,{subscriptionId:a.billingSubscriptionId,customerId:null===(e=a.createdByUser)||void 0===e?void 0:e.billingCustomerId})},onCancel(){var e;c.co.track(c.AA.CHURNKEY_CANCEL_SUBSCRIPTION_COMPLETE,{source:"failed-payment-wall",subscriptionId:a.billingSubscriptionId,customerId:null===(e=a.createdByUser)||void 0===e?void 0:e.billingCustomerId})},onError(e,t){console.warn('Churnkey check("failed-payment", ...) error',e,t)}})},b=(e,t)=>{let n=(0,o.ye)("churnkeyCancelFlowEnabled"),i=(0,s.l)(),c=(0,d.K9)(t),u=(0,l.G)(),g=(0,r.useCallback)(()=>{if(e&&c&&n)return(0,a.d6)("churnkey").then(t=>{var n;if(!t||!e.billingSubscriptionId||!(null===(n=e.createdByUser)||void 0===n?void 0:n.billingCustomerId)){console.debug("[Churnkey] handleCancel - Missing hmac or subscription data",{hmac:t,subscription:e});return}return x({authHash:t,subscription:e,localeKey:i,productKey:c,launchIntercomUI:u})})},[n,i,c,e,u]);return{launchCancelFlow:g,cancelFlowEnabled:n}},x=async e=>{let{authHash:t,subscription:n,localeKey:r,productKey:a,customerAttributes:o={},launchIntercomUI:s}=e;return new Promise((e,l)=>{var u,g,p;null===(p=window.churnkey)||void 0===p||p.init("show",{subscriptionId:n.billingSubscriptionId,customerId:null===(u=n.createdByUser)||void 0===u?void 0:u.billingCustomerId,authHash:t,customerAttributes:{language:r,frequency:null===(g=(0,d.OJ)(n))||void 0===g?void 0:g.frequencyUnit,productKey:a,...o},i18n:{lang:r,messages:_(r,a)},appId:i.v.CHURNKEY_APP_ID,mode:i.v.CHURNKEY_MODE,provider:"stripe",record:!0,handleSupportRequest(){var e;s(),c.co.track(c.AA.CHURNKEY_HANDLE_SUPPORT_CLICK,{source:"cancel-flow",subscriptionId:n.billingSubscriptionId,customerId:null===(e=n.createdByUser)||void 0===e?void 0:e.billingCustomerId})},onCancel(e,t,r){var i;c.co.track(c.AA.CHURNKEY_CANCEL_SUBSCRIPTION_COMPLETE,{source:"cancel-flow",subscriptionId:n.billingSubscriptionId,customerId:null===(i=n.createdByUser)||void 0===i?void 0:i.billingCustomerId,surveyResponse:t,freeformFeedback:r}),console.debug("[launchChurnkeyCancelFlow.onCancel]",{surveyResponse:t,freeformFeedback:r})},onGoToAccount(t){console.debug("[launchChurnkeyCancelFlow.onGoToAccount]",{sessionResults:t}),e({sessionResults:t})},onClose(t){if(console.debug("[launchChurnkeyCancelFlow.onClose]",{sessionResults:t}),!t||t.aborted){l("Churnkey cancel flow aborted");return}e({sessionResults:t})},onError(e){console.warn("[launchChurnkeyCancelFlow.onError]",{message:e}),l({message:e})}})})}},25944:function(e,t,n){"use strict";n.d(t,{bf:function(){return m},iZ:function(){return p},lh:function(){return g},wK:function(){return h}});var r=n(2784),i=n(42111),a=n(91994),o=n(47968),s=n(90604),l=n(56400),d=n(99268);let c=e=>Math.random()<=1/e;class u{setupProvider(){this.t1SetupProvider||(this.t1SetupProvider=performance.now())}downloadDoc(){this.t2DownloadDoc||(this.t2DownloadDoc=performance.now())}onCreate(){this.t3OnCreate||(this.t3OnCreate=performance.now())}report(){return null===this.t1SetupProvider||null===this.t2DownloadDoc||null===this.t3OnCreate?null:{downloadDoc:this.t2DownloadDoc-this.t1SetupProvider,onCreate:this.t3OnCreate-this.t2DownloadDoc}}constructor(){this.t1SetupProvider=null,this.t2DownloadDoc=null,this.t3OnCreate=null}}let g=(e,t)=>{let n=(0,a.CG)(o.Pw),i=(0,r.useRef)(n);(0,r.useEffect)(()=>{i.current=n},[n]),(0,r.useEffect)(()=>{if(e)return window.addEventListener("keydown",n,!0),()=>{window.removeEventListener("keydown",n,!0)};function n(e){let n=e.target.closest(".ProseMirror");if(!n||!i.current||!c(t))return;let r=performance.now();requestAnimationFrame(()=>{let t=e.key;" "===t&&(t="Space");let n=performance.now()-r;(0,d.EF)({...(0,l.H)(),key:t,duration:n})})}},[e,i,t])},p=()=>{let e=(0,i.ye)("rumSampleRate");(0,r.useEffect)(()=>{(0,d._k)(e)},[e])},h=e=>{let t=(0,r.useCallback)(t=>{let{isFullscreen:n=!1}=t;if(!e)return;let r=performance.now();requestAnimationFrame(()=>{requestAnimationFrame(()=>{let e=performance.now()-r;(0,d.gG)({...(0,l.H)(),toMode:s.q.SLIDE_VIEW,duration:e,isFullscreen:n})})})},[e]),n=(0,r.useCallback)(t=>{let{isFullscreen:n=!1}=t;if(!e)return;let r=performance.now();requestAnimationFrame(()=>{requestAnimationFrame(()=>{let e=performance.now()-r;(0,d.gG)({...(0,l.H)(),toMode:s.q.DOC_VIEW,duration:e,isFullscreen:n})})})},[e]);return{recordExitSlideModePerformance:n,recordEnterSlideModePerformance:t}},m=()=>{let[e]=(0,r.useState)(()=>new u),t=(0,r.useCallback)(()=>{e.setupProvider()},[e]),n=(0,r.useCallback)(()=>{e.downloadDoc()},[e]),i=(0,r.useCallback)(()=>{e.onCreate();let t=e.report();if(null===t){console.warn("[HoneycombDocLoadTimer] failed to generate doc timings");return}(0,d.Py)({...(0,l.H)(),duration:t.onCreate}),(0,d.aZ)({...(0,l.H)(),duration:t.downloadDoc})},[e]);return{timeOnCreate:i,timeOnSetupProvider:t,timeOnDownloadDoc:n}}},89311:function(e,t,n){"use strict";n.d(t,{l:function(){return s}});var r=n(5632),i=n(2784),a=n(7e4),o=n(88640);let s=()=>{let{pathname:e,isReady:t}=(0,r.useRouter)(),n=(0,i.useRef)(!1),[s,l]=(0,a.X)(o.H.lastHomeUrl,"/");(0,i.useEffect)(()=>{if(n.current||!t)return;let r="/inspiration"===e||"/templates"===e?e:"/";l(r),n.current=!0},[l,t,e])}},7e4:function(e,t,n){"use strict";n.d(t,{X:function(){return a}});var r=n(2784),i=n(18733);function a(e,t){let[n,a]=(0,r.useState)(()=>{try{let n=i.Q.getItem(e);if(null===n)return t;return JSON.parse(n)}catch(e){return console.error("[useSessionStorage.getItem] Error getting sessionStorage item",e),t}}),o=(0,r.useCallback)(t=>{try{i.Q.setItem(e,JSON.stringify(t)),a(t)}catch(e){console.error("[useSessionStorage.setItem] Error setting sessionStorage item",e)}},[e]);return[n,o]}},62376:function(){},6991:function(){},76298:function(){},4466:function(){},43839:function(){}}]);
//# sourceMappingURL=4792-4893a614c41bee34.js.map